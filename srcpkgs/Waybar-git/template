# Template file for 'Waybar-git'
pkgname=Waybar-git
version=0.11.0.r86.ge959f1d
_commit=${version##*.g}2300c5f7fcc818630c9eae59d834024ce
revision=1
license=MIT
homepage=https://github.com/Alexays/Waybar
short_desc='Polybar-like Wayland Bar for Sway and Wlroots based compositors'
maintainer='Orphaned <orphan@voidlinux.org>'
conflicts=Waybar
distfiles=https://github.com/Alexays/Waybar/archive/$_commit.tar.gz
checksum=50397005e4c6adf04dfa86b672fd480959c469697e375db2067d91cc33efc4d3
conf_files='/etc/xdg/waybar/config.jsonc /etc/xdg/waybar/style.css'
build_style=meson
configure_args="-Dlibudev=enabled -Dman-pages=enabled
 -Dsystemd=disabled -Drfkill=enabled
 $(vopt_feature dbusmenugtk dbusmenu-gtk)
 $(vopt_feature jack jack)
 $(vopt_feature libnl libnl)
 $(vopt_feature mpd mpd)
 $(vopt_feature pipewire wireplumber)
 $(vopt_feature pulseaudio pulseaudio)
 $(vopt_feature sndio sndio)"
hostmakedepends="cmake pkg-config glib-devel wayland-devel scdoc
 $(vopt_if dbusmenugtk gobject-introspection)"
makedepends="chrono-date-devel eudev-libudev-devel fmt-devel
 gtk-layer-shell-devel gtkmm-devel jsoncpp-devel libevdev-devel libglib-devel
 libinput-devel libsigc++-devel playerctl-devel spdlog upower-devel
 wayland-devel
 $(vopt_if dbusmenugtk libdbusmenu-gtk3-devel)
 $(vopt_if jack jack-devel)
 $(vopt_if libnl libnl3-devel)
 $(vopt_if mpd libmpdclient-devel)
 $(vopt_if pipewire 'wireplumber-devel pipewire-devel')
 $(vopt_if pulseaudio pulseaudio-devel)
 $(vopt_if sndio sndio-devel)"

build_options='dbusmenugtk jack libnl mpd pipewire pulseaudio sndio'
build_options_default=$build_options

desc_option_dbusmenugtk='Enable support for tray'
desc_option_libnl='Enable libnl support for network related features'
desc_option_mpd='Enable support for MPD'
desc_option_pipewire='Enable support for pipewire related features'

post_install() {
	vlicense LICENSE
}
